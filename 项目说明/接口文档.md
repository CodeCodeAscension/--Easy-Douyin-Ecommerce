
## **接口文档**

### **通用说明**
1. **请求头**：
   - 经过网关测试需要用户登录的接口，请求头需设置 `Authorization` 字段。
   - 不经过网关直接测试微服务接口，请求头需设置 `X-User-Id` 和 `X-User-Power` 字段。

2. **响应格式**：
   所有接口都会返回 `ResponseResult` 对象，形式如下：

   | 参数名称 | 参数说明         | 类型   |
   |----------|------------------|--------|
   | code     | 接口返回状态码   | 整数   |
   | data     | 接口返回的数据   | 对象   |
   | msg      | 接口返回的信息   | 字符串 |

3. **权限说明**：
   - 接口标注“需要用户登录”的，必须传递用户凭证（如 `Authorization`）。
   - 接口标注“需要管理员登录”的，必须传递管理员凭证。
   - 未标注的接口默认为不需要用户登录。

---

## **一、用户服务**

### **1. 登录**
- **接口地址**：`/api/v1/user/login`
- **请求方式**：`POST`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody LoginDto`

  | 参数名称   | 参数说明           | 传参位置     | 是否必须 | 数据类型 |
  |------------|--------------------|--------------|----------|----------|
  | email      | 用户注册时的邮箱   | LoginDto     | 是       | 字符串   |
  | password   | 用户密码           | LoginDto     | 是       | 字符串   |

- **请求示例**：
  ```json
  {
    "email": "admin@vlsmb.top",
    "password": "admin"
  }
  ```

- **响应参数**：`ResponseResult<LoginVo>`，其中 `data` 字段的定义为：

  | 参数名称     | 参数说明         | 数据类型 |
  |--------------|------------------|----------|
  | userId       | 用户ID           | 长整型   |
  | accessToken  | 用户访问令牌     | 字符串   |
  | refreshToken | 用户刷新令牌     | 字符串   |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "操作成功",
    "data": {
      "userId": 1892225722047713281,
      "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
      "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
    }
  }
  ```

---

### **2. 注册**
- **接口地址**：`/api/v1/user/register`
- **请求方式**：`POST`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody RegisterDto`

  | 参数名称     | 参数说明               | 传参位置     | 是否必须 | 数据类型 |
  |--------------|------------------------|--------------|----------|----------|
  | email        | 用户电子邮件           | RegisterDto  | 是       | 字符串   |
  | password     | 用户密码               | RegisterDto  | 是       | 字符串   |
  | confirmPassword | 用户再次确认的密码 | RegisterDto  | 是       | 字符串   |

- **请求示例**：
  ```json
  {
    "email": "user@example.com",
    "password": "password123",
    "confirmPassword": "password123"
  }
  ```

- **响应参数**：`ResponseResult<RegisterVo>`，其中 `data` 字段的定义为：

  | 参数名称 | 参数说明 | 数据类型 |
  |----------|----------|----------|
  | userId   | 新用户ID | 长整型   |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "注册成功",
    "data": {
      "userId": 1892225722047713282
    }
  }
  ```

---

### **3. 用户登出**
- **接口地址**：`/api/v1/user/logout`
- **请求方式**：`POST`
- **请求参数**：无
- **返回对象**：`ResponseResult<Null>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "登出成功",
    "data": null
  }
  ```

---

### **4. 删除用户**
- **接口地址**：`/api/v1/users`
- **请求方式**：`DELETE`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody LogoffDto`

  | 参数名称 | 参数说明               | 传参位置     | 是否必须 | 数据类型 |
  |----------|------------------------|--------------|----------|----------|
  | status   | 注销或者封禁（1封禁，2注销） | LogoffDto  | 是       | 整数     |
  | reason   | 注销或封禁原因         | LogoffDto  | 否       | 字符串   |

- **请求示例**：
  ```json
  {
    "status": 2,
    "reason": "用户主动注销"
  }
  ```

- **返回对象**：`ResponseResult<Null>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "用户注销成功",
    "data": null
  }
  ```

---

### **5. 更新用户**
- **接口地址**：`/api/v1/users`
- **请求方式**：`PUT`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody UserUpdateDto`

  | 参数名称   | 参数说明       | 传参位置       | 是否必须 | 数据类型 |
  |------------|----------------|----------------|----------|----------|
  | username   | 用户名         | UserUpdateDto  | 否       | 字符串   |
  | phone      | 手机号         | UserUpdateDto  | 否       | 字符串   |
  | city       | 所在城市       | UserUpdateDto  | 否       | 字符串   |
  | province   | 所在省份       | UserUpdateDto  | 否       | 字符串   |
  | country    | 所在国家       | UserUpdateDto  | 否       | 字符串   |
  | zipCode    | 邮政编码       | UserUpdateDto  | 否       | 字符串   |
  | currency   | 用户使用的货币 | UserUpdateDto  | 否       | 字符串   |

- **请求示例**：
  ```json
  {
    "username": "new_username",
    "phone": "1234567890",
    "city": "上海",
    "province": "上海",
    "country": "中国",
    "zipCode": "200000",
    "currency": "CNY"
  }
  ```

- **返回对象**：`ResponseResult<Null>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "用户信息更新成功",
    "data": null
  }
  ```

---

### **6. 获取用户身份信息**
- **接口地址**：`/api/v1/users`
- **请求方式**：`GET`
- **请求参数**：无
- **返回对象**：`ResponseResult<UserInfoVo>`，其中 `data` 字段的定义为：

  | 参数名称     | 参数说明         | 数据类型       |
  |--------------|------------------|----------------|
  | userId       | 用户ID           | 长整型         |
  | email        | 邮箱地址         | 字符串         |
  | username     | 用户名           | 字符串         |
  | phone        | 手机号           | 字符串         |
  | city         | 所在城市         | 字符串         |
  | province     | 所在省份         | 字符串         |
  | country      | 所在国家         | 字符串         |
  | zipCode      | 邮政编码         | 字符串         |
  | currency     | 用户使用的货币   | 字符串         |
  | status       | 状态（0正常，1封禁，2注销） | 整数 |
  | reason       | 注销或封禁原因   | 字符串         |
  | createTime   | 创建时间         | 本地日期时间   |
  | updateTime   | 修改时间         | 本地日期时间   |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "获取用户信息成功",
    "data": {
      "userId": 1892225722047713281,
      "email": "user@example.com",
      "username": "new_username",
      "phone": "1234567890",
      "city": "上海",
      "province": "上海",
      "country": "中国",
      "zipCode": "200000",
      "currency": "CNY",
      "status": 0,
      "reason": null,
      "createTime": "2023-10-01T12:00:00",
      "updateTime": "2023-10-05T14:30:00"
    }
  }
  ```

---

### **7. 续期令牌**
- **接口地址**：`/api/v1/user/refresh`
- **请求方式**：`PUT`
- **请求参数**：`@RequestHeader("Refresh-Token")`
- **返回对象**：`ResponseResult<LoginVo>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "令牌续期成功",
    "data": {
      "userId": 1892225722047713281,
      "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
      "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
    }
  }
  ```

---


## **一、用户服务**
（已完善，见上文）

---

## **二、商品服务**

### **1. 创建商品**
- **接口地址**：`/api/v1/products`
- **请求方式**：`POST`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody CreateProductDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | name           | 商品名称           | CreateProductDto | 是       | 字符串         |
  | description    | 商品描述           | CreateProductDto | 是       | 字符串         |
  | price          | 商品价格           | CreateProductDto | 是       | 浮点           |
  | stock          | 商品库存           | CreateProductDto | 否       | 整数           |
  | merchantName   | 商家名称           | CreateProductDto | 是       | 字符串         |
  | categories     | 所属类别           | CreateProductDto | 是       | 字符串列表     |
  | status         | 状态（0上架，1下架） | CreateProductDto | 否       | 整数           |

- **请求示例**：
  ```json
  {
    "name": "智能手机",
    "description": "高性能智能手机",
    "price": 2999.99,
    "stock": 100,
    "merchantName": "某商家",
    "categories": ["电子产品", "手机"],
    "status": 0
  }
  ```

- **返回对象**：`ResponseResult<Null>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "商品创建成功",
    "data": null
  }
  ```

---

### **2. 修改商品信息**
- **接口地址**：`/api/v1/products`
- **请求方式**：`PUT`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody UpdateProductDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | id             | 商品ID             | UpdateProductDto | 是       | 长整型         |
  | name           | 商品名称           | UpdateProductDto | 否       | 字符串         |
  | description    | 商品描述           | UpdateProductDto | 否       | 字符串         |
  | price          | 商品价格           | UpdateProductDto | 否       | 浮点           |
  | sold           | 商品销量           | UpdateProductDto | 否       | 整数           |
  | stock          | 商品库存           | UpdateProductDto | 否       | 整数           |
  | merchantName   | 商家名称           | UpdateProductDto | 否       | 字符串         |
  | categories     | 所属类别           | UpdateProductDto | 否       | 字符串列表     |
  | status         | 状态（0上架，1下架） | UpdateProductDto | 否       | 整数           |

- **请求示例**：
  ```json
  {
    "id": 123456789,
    "name": "智能手机（新款）",
    "price": 3999.99,
    "stock": 150
  }
  ```

- **返回对象**：`ResponseResult<Null>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "商品信息更新成功",
    "data": null
  }
  ```

---

### **3. 删除商品**
- **接口地址**：`/api/v1/products/{productId}`
- **请求方式**：`DELETE`
- **请求参数**：`@PathVariable productId`

- **返回对象**：`ResponseResult<Null>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "商品删除成功",
    "data": null
  }
  ```

---

### **4. 查询单条商品信息**
- **接口地址**：`/api/v1/products/{productId}`
- **请求方式**：`GET`
- **请求参数**：`@PathVariable productId`
- **返回对象**：`ResponseResult<ProductInfoVo>`，其中 `data` 字段的定义为：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | id             | 商品ID             | 长整型         |
  | name           | 商品名称           | 字符串         |
  | description    | 商品描述           | 字符串         |
  | price          | 商品价格           | 浮点           |
  | sold           | 商品销量           | 整数           |
  | stock          | 商品库存           | 整数           |
  | merchantName   | 商家名称           | 字符串         |
  | categories     | 所属类别           | 字符串列表     |
  | status         | 状态（0上架，1下架） | 整数           |
  | createTime     | 创建时间           | 本地日期时间   |
  | updateTime     | 修改时间           | 本地日期时间   |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "获取商品信息成功",
    "data": {
      "id": 123456789,
      "name": "智能手机",
      "description": "高性能智能手机",
      "price": 2999.99,
      "sold": 50,
      "stock": 100,
      "merchantName": "某商家",
      "categories": ["电子产品", "手机"],
      "status": 0,
      "createTime": "2023-10-01T12:00:00",
      "updateTime": "2023-10-05T14:30:00"
    }
  }
  ```

---

### **5. 指定某种类别查询商品信息**
- **接口地址**：`/api/v1/products`
- **请求方式**：`GET`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody ListProductsDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | page           | 第几页（默认第一页） | ListProductsDto | 否       | 整数           |
  | pageSize       | 页数大小（默认20） | ListProductsDto | 否       | 整数           |
  | categoryName   | 类型名称（默认Null） | ListProductsDto | 否       | 字符串         |

- **请求示例**：
  ```json
  {
    "page": 1,
    "pageSize": 10,
    "categoryName": "电子产品"
  }
  ```

- **返回对象**：`ResponseResult<IPage<ProductInfoVo>>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "获取商品列表成功",
    "data": {
      "records": [
        {
          "id": 123456789,
          "name": "智能手机",
          "description": "高性能智能手机",
          "price": 2999.99,
          "sold": 50,
          "stock": 100,
          "merchantName": "某商家",
          "categories": ["电子产品", "手机"],
          "status": 0,
          "createTime": "2023-10-01T12:00:00",
          "updateTime": "2023-10-05T14:30:00"
        }
      ],
      "total": 1,
      "size": 10,
      "current": 1,
      "pages": 1
    }
  }
  ```

---

### **6. 指定条件查询商品信息**
- **接口地址**：`/api/v1/products/search`
- **请求方式**：`GET`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody SearchProductsDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | page           | 第几页（默认第一页） | SearchProductsDto | 否       | 整数           |
  | pageSize       | 页数大小（默认20） | SearchProductsDto | 否       | 整数           |
  | productName    | 商品名称           | SearchProductsDto | 否       | 字符串         |
  | priceLow       | 最低价格           | SearchProductsDto | 否       | 浮点           |
  | priceHigh      | 最高价格           | SearchProductsDto | 否       | 浮点           |
  | stock          | 库存               | SearchProductsDto | 否       | 整数           |
  | sold           | 销量               | SearchProductsDto | 否       | 整数           |
  | merchantName   | 商家名称           | SearchProductsDto | 否       | 字符串         |
  | categoryName   | 类型名称           | SearchProductsDto | 否       | 字符串         |

- **请求示例**：
  ```json
  {
    "page": 1,
    "pageSize": 10,
    "productName": "手机",
    "priceLow": 1000,
    "priceHigh": 5000
  }
  ```

- **返回对象**：`ResponseResult<IPage<ProductInfoVo>>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "获取商品列表成功",
    "data": {
      "records": [
        {
          "id": 123456789,
          "name": "智能手机",
          "description": "高性能智能手机",
          "price": 2999.99,
          "sold": 50,
          "stock": 100,
          "merchantName": "某商家",
          "categories": ["电子产品", "手机"],
          "status": 0,
          "createTime": "2023-10-01T12:00:00",
          "updateTime": "2023-10-05T14:30:00"
        }
      ],
      "total": 1,
      "size": 10,
      "current": 1,
      "pages": 1
    }
  }
  ```

---


## **三、购物车服务**

### **1. 向购物车中添加商品**
- **接口地址**：`/api/v1/carts`
- **请求方式**：`POST`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody AddItemDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | productId      | 商品ID             | AddItemDto     | 是       | 长整型         |
  | quantity       | 商品数量           | AddItemDto     | 是       | 整数           |

- **请求示例**：
  ```json
  {
    "productId": 123456789,
    "quantity": 2
  }
  ```

- **返回对象**：`ResponseResult<Null>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "商品添加成功",
    "data": null
  }
  ```

---

### **2. 清空购物车**
- **接口地址**：`/api/v1/carts`
- **请求方式**：`DELETE`
- **请求参数**：无
- **返回对象**：`ResponseResult<Null>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "购物车已清空",
    "data": null
  }
  ```

---

### **3. 获取购物车信息**
- **接口地址**：`/api/v1/carts`
- **请求方式**：`GET`
- **请求参数**：无
- **返回对象**：`ResponseResult<CartInfoVo>`，其中 `data` 字段的定义为：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | id             | 购物车ID           | 长整型         |
  | userId         | 用户ID             | 长整型         |
  | status         | 状态（0待支付，1已支付，2已删除） | 整数 |
  | cartItems      | 购物车商品列表     | List<CartItemInfo> |
  | createTime     | 创建时间           | 本地日期时间   |
  | updateTime     | 修改时间           | 本地日期时间   |

  **CartItemInfo 的定义**：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | id             | 购物车项ID         | 长整型         |
  | productId      | 商品ID             | 长整型         |
  | quantity       | 商品数量           | 整数           |
  | status         | 状态（0待支付，1已支付，2已删除） | 整数 |
  | createTime     | 创建时间           | 本地日期时间   |
  | updateTime     | 修改时间           | 本地日期时间   |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "获取购物车信息成功",
    "data": {
      "id": 987654321,
      "userId": 1892225722047713281,
      "status": 0,
      "cartItems": [
        {
          "id": 123456789,
          "productId": 123456789,
          "quantity": 2,
          "status": 0,
          "createTime": "2023-10-01T12:00:00",
          "updateTime": "2023-10-05T14:30:00"
        }
      ],
      "createTime": "2023-10-01T12:00:00",
      "updateTime": "2023-10-05T14:30:00"
    }
  }
  ```

---

## **四、订单服务**

### **1. 创建订单**
- **接口地址**：`/api/v1/orders`
- **请求方式**：`POST`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody PlaceOrderDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | userCurrency   | 用户使用的货币     | PlaceOrderDto  | 是       | 字符串         |
  | addressInfoVo  | 用户收获地址       | PlaceOrderDto  | 是       | 地址信息对象   |
  | cartItems      | 购物车商品列表     | PlaceOrderDto  | 是       | List<CartItem> |

  **地址信息对象的定义**：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | streetAddress  | 街道地址           | 字符串         |
  | city           | 城市               | 字符串         |
  | province       | 省份               | 字符串         |
  | country        | 国家               | 字符串         |
  | zipCode        | 邮政编码           | 字符串         |

  **CartItem 的定义**：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | productId      | 商品ID             | 长整型         |
  | quantity       | 商品数量           | 整数           |

- **请求示例**：
  ```json
  {
    "userCurrency": "CNY",
    "addressInfoVo": {
      "streetAddress": "某街道123号",
      "city": "上海",
      "province": "上海",
      "country": "中国",
      "zipCode": "200000"
    },
    "cartItems": [
      {
        "productId": 123456789,
        "quantity": 2
      }
    ]
  }
  ```

- **返回对象**：`ResponseResult<PlaceOrderVo>`，其中 `data` 字段的定义为：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | orderId        | 订单ID             | 字符串         |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "订单创建成功",
    "data": {
      "orderId": "ORDER123456789"
    }
  }
  ```

---

### **2. 修改订单信息**
- **接口地址**：`/api/v1/orders`
- **请求方式**：`PUT`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody UpdateOrderDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | orderId        | 订单ID             | UpdateOrderDto | 是       | 字符串         |
  | status         | 支付状态（0待确认，1已确认待支付，2已支付，3已取消） | UpdateOrderDto | 是       | 整数           |
  | userCurrency   | 用户使用的货币     | UpdateOrderDto | 否       | 字符串         |
  | addressInfoVo  | 用户收获地址       | UpdateOrderDto | 否       | 地址信息对象   |
  | cartItems      | 购物车商品列表     | UpdateOrderDto | 否       | List<CartItem> |

- **请求示例**：
  ```json
  {
    "orderId": "ORDER123456789",
    "status": 2,
    "userCurrency": "CNY"
  }
  ```

- **返回对象**：`ResponseResult<Null>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "订单信息更新成功",
    "data": null
  }
  ```

---

### **3. 查看用户订单**
- **接口地址**：`/api/v1/orders`
- **请求方式**：`GET`
- **请求参数**：`@RequestParam Integer pageSize, @RequestParam Integer pageNum`
- **返回对象**：`ResponseResult<IPage<OrderInfoVo>>`，其中 `data` 字段的定义为：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | orderId        | 订单ID             | 字符串         |
  | status         | 支付状态（0待支付，1已确认待支付，2已支付，3支付失败，4已取消） | 整数 |
  | userCurrency   | 用户使用的货币     | 字符串         |
  | addressInfoVo  | 用户收获地址       | 地址信息对象   |
  | cartItems      | 购物车商品列表     | List<CartItem> |
  | createTime     | 创建时间           | 本地日期时间   |
  | paymentTime    | 支付时间           | 本地日期时间   |
  | updateTime     | 修改时间           | 本地日期时间   |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "获取订单列表成功",
    "data": {
      "records": [
        {
          "orderId": "ORDER123456789",
          "status": 2,
          "userCurrency": "CNY",
          "addressInfoVo": {
            "streetAddress": "某街道123号",
            "city": "上海",
            "province": "上海",
            "country": "中国",
            "zipCode": "200000"
          },
          "cartItems": [
            {
              "productId": 123456789,
              "quantity": 2
            }
          ],
          "createTime": "2023-10-01T12:00:00",
          "paymentTime": "2023-10-01T12:30:00",
          "updateTime": "2023-10-05T14:30:00"
        }
      ],
      "total": 1,
      "size": 10,
      "current": 1,
      "pages": 1
    }
  }
  ```

---

## **五、结算服务**

### **1. 订单结算**
- **接口地址**：`/api/v1/checkout`
- **请求方式**：`POST`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody CheckoutDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | cartId         | 购物车ID           | CheckoutDto    | 是       | 整数           |
  | firstName      | 用户名字           | CheckoutDto    | 否       | 字符串         |
  | lastName       | 用户姓氏           | CheckoutDto    | 否       | 字符串         |
  | placeOrderDto  | 创建订单的信息     | CheckoutDto    | 是       | PlaceOrderDto  |
  | creditId       | 银行卡ID           | CheckoutDto    | 是       | 字符串         |

- **请求示例**：
  ```json
  {
    "cartId": 987654321,
    "firstName": "张",
    "lastName": "三",
    "placeOrderDto": {
      "userCurrency": "CNY",
      "addressInfoVo": {
        "streetAddress": "某街道123号",
        "city": "上海",
        "province": "上海",
        "country": "中国",
        "zipCode": "200000"
      },
      "cartItems": [
        {
          "productId": 123456789,
          "quantity": 2
        }
      ]
    },
    "creditId": "CREDIT123456789"
  }
  ```

- **返回对象**：`ResponseResult<CheckoutVo>`，其中 `data` 字段的定义为：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | orderId        | 订单ID             | 字符串         |
  | transactionId  | 交易ID             | 字符串         |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "订单结算成功",
    "data": {
      "orderId": "ORDER123456789",
      "transactionId": "TRANS123456789"
    }
  }
  ```

---

## **六、支付服务**

### **1. 支付**
- **接口地址**：`/api/v1/payments`
- **请求方式**：`POST`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody ChargeDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | orderId        | 订单ID             | ChargeDto      | 是       | 字符串         |
  | creditId       | 银行卡ID           | ChargeDto      | 是       | 字符串         |

- **请求示例**：
  ```json
  {
    "orderId": "ORDER123456789",
    "creditId": "CREDIT123456789"
  }
  ```

- **返回对象**：`ResponseResult<ChargeVo>`，其中 `data` 字段的定义为：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | preTransactionId | 预交易ID         | 字符串         |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "支付成功",
    "data": {
      "preTransactionId": "PRE123456789"
    }
  }
  ```

---

### **2. 获取交易信息**
- **接口地址**：`/api/v1/payments`
- **请求方式**：`GET`
- **请求参数**：`@RequestBody TransactionInfoDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | transactionId  | 交易ID             | TransactionInfoDto | 否       | 字符串         |
  | preTransactionId | 预交易ID         | TransactionInfoDto | 否       | 字符串         |

- **请求示例**：
  ```json
  {
    "transactionId": "TRANS123456789"
  }
  ```

- **返回对象**：`ResponseResult<TransactionInfoVo>`，其中 `data` 字段的定义为：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | transactionId  | 交易ID             | 字符串         |
  | preTransactionId | 预交易ID         | 字符串         |
  | orderId        | 订单ID             | 字符串         |
  | creditId       | 银行卡ID           | 字符串         |
  | amount         | 金额               | 浮点           |
  | status         | 状态（0待确认，1支付成功，2支付失败，3已取消） | 整数 |
  | reason         | 失败原因           | 字符串         |
  | createTime     | 创建时间           | 本地日期时间   |
  | updateTime     | 修改时间           | 本地日期时间   |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "获取交易信息成功",
    "data": {
      "transactionId": "TRANS123456789",
      "preTransactionId": "PRE123456789",
      "orderId": "ORDER123456789",
      "creditId": "CREDIT123456789",
      "amount": 2999.99,
      "status": 1,
      "reason": null,
      "createTime": "2023-10-01T12:00:00",
      "updateTime": "2023-10-05T14:30:00"
    }
  }
  ```

---

### **3. 取消支付**
- **接口地址**：`/api/v1/payments`
- **请求方式**：`DELETE`
- **请求参数**：`@RequestParam preTransactionId`
- **返回对象**：`ResponseResult<Null>`

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "支付取消成功",
    "data": null
  }
  ```

---

## **七、AI服务**

### **1. 智能订单查询**
- **接口地址**：`/api/v1/ai/orders/query`
- **请求方式**：`POST`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody AiOrderQueryDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | queryContent   | 查询内容（自然语言文本） | AiOrderQueryDto | 是       | 字符串         |
  | orderStatusEnum | 订单状态（0待确认，1已确认待支付，2已支付，3已取消） | AiOrderQueryDto | 否       | 整数           |
  | maxResultCount | 最大返回结果数（默认10） | AiOrderQueryDto | 否       | 整数           |

- **请求示例**：
  ```json
  {
    "queryContent": "查询最近的订单",
    "orderStatusEnum": 2,
    "maxResultCount": 5
  }
  ```

- **返回对象**：`ResponseResult<AiOrderQueryVo>`，其中 `data` 字段的定义为：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | answer         | 自然语言形式的查询结果（AI生成） | 字符串         |
  | orderList      | 结构化订单数据列表 | List<OrderInfoVo> |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "查询成功",
    "data": {
      "answer": "以下是您最近的订单：",
      "orderList": [
        {
          "orderId": "ORDER123456789",
          "status": 2,
          "userCurrency": "CNY",
          "addressInfoVo": {
            "streetAddress": "某街道123号",
            "city": "上海",
            "province": "上海",
            "country": "中国",
            "zipCode": "200000"
          },
          "cartItems": [
            {
              "productId": 123456789,
              "quantity": 2
            }
          ],
          "createTime": "2023-10-01T12:00:00",
          "paymentTime": "2023-10-01T12:30:00",
          "updateTime": "2023-10-05T14:30:00"
        }
      ]
    }
  }
  ```

---

### **2. 模拟自动下单**
- **接口地址**：`/api/v1/ai/orders/auto-place`
- **请求方式**：`POST`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody AiPlaceOrderDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | triggerType    | 根据自然语言指令要求 | AiPlaceOrderDto | 是       | 整数           |
  | command        | 自然语言指令       | AiPlaceOrderDto | 是       | 整数           |
  | confirmFlag    | 是否需要用户手动确认 | AiPlaceOrderDto | 是       | 布尔           |

- **请求示例**：
  ```json
  {
    "triggerType": 1,
    "command": 1,
    "confirmFlag": true
  }
  ```

- **返回对象**：`ResponseResult<AiPlaceOrderVo>`，其中 `data` 字段的定义为：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | orderList      | 需要确认时返回符合要求的订单，不需要确认时返回下单的订单列表 | List<OrderInfoVo> |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "自动下单成功",
    "data": {
      "orderList": [
        {
          "orderId": "ORDER123456789",
          "status": 2,
          "userCurrency": "CNY",
          "addressInfoVo": {
            "streetAddress": "某街道123号",
            "city": "上海",
            "province": "上海",
            "country": "中国",
            "zipCode": "200000"
          },
          "cartItems": [
            {
              "productId": 123456789,
              "quantity": 2
            }
          ],
          "createTime": "2023-10-01T12:00:00",
          "paymentTime": "2023-10-01T12:30:00",
          "updateTime": "2023-10-05T14:30:00"
        }
      ]
    }
  }
  ```

---

### **3. 智能聊天助手**
- **接口地址**：`/api/v1/ai/chat/assistant`
- **请求方式**：`POST`
- **请求数据类型**：`application/json`
- **请求参数**：`@RequestBody AiChatAssistantDto`

  | 参数名称       | 参数说明           | 传参位置       | 是否必须 | 数据类型       |
  |----------------|--------------------|----------------|----------|----------------|
  | chatContent    | 聊天内容（自然语言文本） | AiChatAssistantDto | 是       | 字符串         |

- **请求示例**：
  ```json
  {
    "chatContent": "帮我查询最近的订单"
  }
  ```

- **返回对象**：`ResponseResult<AiChatAssistantVo>`，其中 `data` 字段的定义为：

  | 参数名称       | 参数说明           | 数据类型       |
  |----------------|--------------------|----------------|
  | answer         | 自然语言形式的回答（AI生成） | 字符串         |

- **响应示例**：
  ```json
  {
    "code": 200,
    "msg": "聊天成功",
    "data": {
      "answer": "以下是您最近的订单：..."
    }
  }
  ```

---
